webpackJsonp([3],{LGuY:function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},MzKL:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("Dd8w"),a=n.n(o),i=n("NYxO"),r=n("lDdF"),s=n.n(r),c=n("olLJ"),l=n("0xDb"),d=n("Oac0"),u={name:"palette-generate",components:{PaletteStatus:c.a},data:function(){return{themeIndex:-1,libCss:"",libVw:"",cssLoading:!1,stylLoading:!1,copyContent:"",copyIcon:"el-icon-document"}},computed:a()({},Object(i.d)(["themes","mandMobileInfo"]),{theme:function(){var t=this.themeIndex;return t<0?null:this.themes[t]}}),created:function(){var t=this;this.themeIndex=this.$route.query.themeIndex,this.initCss(),this.mandMobileInfo||this.getMandMobileInfo().catch(function(e){e.message&&t.$message(e.message)})},methods:a()({},Object(i.b)({getMandMobileCss:"GET_MAND_MOBILE_CSS",getMandMobileInfo:"GET_MAND_MOBILE_RELEASE"}),{initCss:function(){var t=this;this.theme&&this.getMandMobileCss({themeIndex:this.themeIndex,type:"lib"}).then(function(e){200===e.status&&e.data?t.libCss=e.data:t.$message.error(t.$t("edit.cssError").replace("xxxxx","mand-mobile v"+t.theme.version+" css(px) file"))})},generateStyl:function(){var t=[],e="",n=[];this.stylLoading=!0,Object(l.j)(this.theme.data,function(o,a,i){var r=i[1];e!==i[1]&&(n.length&&t.push(n.join("\n")),e=r,n=["\n// "+r]),n.push(o+" = "+a)}),t.push(n.join("\n")),this.saveFile(t.join("\n\n"),"styl"),this.copyContent=t.join("\n\n"),this.stylLoading=!1},generateCss:function(){var t=this.libCss,e=this.theme.data;this.cssLoading=!0,Object(l.j)(e,function(n,o,a){d.b.hasOwnProperty(o)&&(o=Object(l.c)(e,o)),t=t.replace(new RegExp("var\\(--"+n.trim()+"\\)","g"),o)}),this.saveFile(t,"css"),this.copyContent=t,this.cssLoading=!1},saveFile:function(t,e,n){try{var o=new Blob([t],{type:"text/plain;charset=utf-8"});s.a.saveAs(o,"mand-mobile."+this.mandMobileInfo+"-"+this.theme.title+"."+e)}catch(e){n(t)}},onCopySuccess:function(){var t=this;this.copyIcon="el-icon-check",setTimeout(function(){t.copyIcon="el-icon-document"},1e3)}})},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"palette-generate"},[this.theme?[n("div",{staticClass:"palette-generate-download"},[n("i",{staticClass:"el-icon-printer"}),t._v(" "),n("div",{staticClass:"download-block button"},[n("el-button",{attrs:{type:"primary",loading:t.cssLoading,round:""},on:{click:t.generateCss}},[t._v(t._s(t.$t("generate.css")))]),t._v(" "),n("el-button",{attrs:{type:"danger",loading:t.stylLoading,round:""},on:{click:t.generateStyl}},[t._v(t._s(t.$t("generate.styl")))])],1),t._v(" "),n("p",{staticClass:"download-block text"},[t._v(t._s(t.$t("generate.error")))])]),t._v(" "),t.copyContent?n("div",{staticClass:"palette-generate-content"},[n("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.copyContent,expression:"copyContent",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopySuccess,expression:"onCopySuccess",arg:"success"}],attrs:{type:"primary",icon:t.copyIcon,circle:""}}),t._v(" "),n("pre",[t._v("        "+t._s(t.copyContent)+"\n      ")])],1):t._e()]:[n("palette-status",{attrs:{imgUrl:"//manhattan.didistatic.com/static/manhattan/mfd/result-page/network",describe:t.$t("list.errorTip"),button:{text:t.$t("list.errorBtn"),handler:function(){t.$router.replace("/record")}}}})]],2)},staticRenderFns:[]};var f=n("VU/8")(u,p,!1,function(t){n("cZHS")},null,null);e.default=f.exports},cZHS:function(t,e){},lDdF:function(t,e,n){var o,a=a||function(t){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=function(){return t.URL||t.webkitURL||t},n=t.document.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in n,a=/constructor/i.test(t.HTMLElement)||t.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent),r=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},s=function(t){setTimeout(function(){"string"==typeof t?e().revokeObjectURL(t):t.remove()},4e4)},c=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},l=function(l,d,u){u||(l=c(l));var p,f=this,h="application/octet-stream"===l.type,m=function(){!function(t,e,n){for(var o=(e=[].concat(e)).length;o--;){var a=t["on"+e[o]];if("function"==typeof a)try{a.call(t,n||t)}catch(t){r(t)}}}(f,"writestart progress write writeend".split(" "))};if(f.readyState=f.INIT,o)return p=e().createObjectURL(l),void setTimeout(function(){var t,e;n.href=p,n.download=d,t=n,e=new MouseEvent("click"),t.dispatchEvent(e),m(),s(p),f.readyState=f.DONE});!function(){if((i||h&&a)&&t.FileReader){var n=new FileReader;return n.onloadend=function(){var e=i?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,f.readyState=f.DONE,m()},n.readAsDataURL(l),void(f.readyState=f.INIT)}p||(p=e().createObjectURL(l)),h?t.location.href=p:t.open(p,"_blank")||(t.location.href=p);f.readyState=f.DONE,m(),s(p)}()},d=l.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=c(t)),navigator.msSaveOrOpenBlob(t,e)}:(d.abort=function(){},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,function(t,e,n){return new l(t,e||t.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */void 0!==t&&t.exports?t.exports.saveAs=a:null!==n("LGuY")&&null!==n("nErl")&&(void 0===(o=function(){return a}.call(e,n,e,t))||(t.exports=o))},nErl:function(t,e){(function(e){t.exports=e}).call(e,{})}});
//# sourceMappingURL=generate.e044ff93c9c0d24688a7.js.map